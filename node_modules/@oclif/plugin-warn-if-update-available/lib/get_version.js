"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fs = require("fs-extra");
const http_call_1 = require("http-call");
async function run(name, file, version) {
    await fs.outputJSON(file, { current: version }); // touch file with current version to prevent multiple updates
    const { body } = await http_call_1.default.get(`https://registry.npmjs.org/${name.replace('/', '%2f')}`, { timeout: 5000 });
    await fs.outputJSON(file, Object.assign({}, body['dist-tags'], { current: version }));
    process.exit(0);
}
run(process.argv[2], process.argv[3], process.argv[4])
    .catch(require('@oclif/errors/handle'));
